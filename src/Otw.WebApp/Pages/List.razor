@page "/List"
@inject HttpClient Http

<h3>List</h3>

@if (_data == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table">
        <tbody>
        @foreach (var word in _data)
        {
            <tr>
                <td>@word.English</td>
                <td>@word.Polish</td>
            </tr>
        }
        </tbody>
    </table>
}

@code {
    
    private ICollection<(string English, string Polish)>? _data;

    protected override async Task OnInitializedAsync()
    {
        var csvContent = await Http.GetStringAsync("data/data-v1.csv");
        
        var list = new List<(string English, string Polish)>();

        var lines = csvContent.Split(['\r', '\n'], StringSplitOptions.RemoveEmptyEntries);
        
        for (int i = 0; i < lines.Length; i++)
        {
            var parts = lines[i].Split(';');
            if (parts.Length >= 2)
            {
                list.Add((parts[0].Trim(), parts[1].Trim()));
            }
        }
        
        _data = list;
    }

}
